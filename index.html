<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESBHANDARI.SYS - root@darkstar</title>
    <style>
        :root {
            --bg-color: #555555; /* Dark gray base */
            --win-gray: #c0c0c0;  /* Classic Motif gray */
            --win-border-light: #ffffff;
            --win-border-dark: #606060;
            --win-border-black: #000000;
            --term-bg: #000000;
            --term-text: #00ff00; /* Classic green phosphor */
            --font-ui: 'Courier New', monospace; /* Monospace for that raw X11 feel */
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            font-family: var(--font-ui);
            user-select: none;
            -webkit-user-select: none;
            
            /* --- THE CLASSIC "ROOT WEAVE" BACKGROUND --- */
            background-color: var(--bg-color);
            background-image: 
                linear-gradient(45deg, #444 25%, transparent 25%, transparent 75%, #444 75%, #444),
                linear-gradient(45deg, #444 25%, transparent 25%, transparent 75%, #444 75%, #444);
            background-size: 4px 4px;
            background-position: 0 0, 2px 2px;
        }

        /* --- DESKTOP ICONS --- */
        .icon-container {
            position: absolute;
            top: 20px;
            right: 20px; /* Unix systems often stacked icons on the right or freely */
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .desktop-icon {
            width: 64px;
            text-align: center;
            cursor: pointer;
            color: white;
            text-shadow: 1px 1px 0 #000;
        }

        .desktop-icon svg {
            width: 48px;
            height: 48px;
            fill: var(--win-gray);
            border: 1px solid transparent;
        }
        
        .desktop-icon:hover svg {
            fill: #ffffff;
        }

        .desktop-icon span {
            display: block;
            margin-top: 5px;
            font-size: 12px;
            font-weight: bold;
            background-color: #000080; /* Label background */
            padding: 2px;
        }

        /* --- MOTIF WINDOW STYLE --- */
        .window {
            position: absolute;
            background-color: var(--win-gray);
            /* The Thick "3D" Motif Border */
            border-top: 2px solid var(--win-border-light);
            border-left: 2px solid var(--win-border-light);
            border-right: 2px solid var(--win-border-black);
            border-bottom: 2px solid var(--win-border-black);
            box-shadow: 4px 4px 10px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            min-width: 200px;
            min-height: 100px;
        }

        .title-bar {
            background-color: var(--win-gray);
            height: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2px 4px;
            border-bottom: 2px solid var(--win-border-dark);
            cursor: move; /* Indicates drag capability */
        }

        .title-bar-text {
            font-weight: bold;
            font-size: 14px;
            color: black;
            flex-grow: 1;
            text-align: center;
            letter-spacing: 1px;
        }

        .win-btn {
            width: 18px;
            height: 18px;
            background-color: var(--win-gray);
            border-top: 1px solid var(--win-border-light);
            border-left: 1px solid var(--win-border-light);
            border-right: 1px solid var(--win-border-black);
            border-bottom: 1px solid var(--win-border-black);
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .win-btn:active {
            border: 1px solid var(--win-border-black);
        }

        /* --- XTERM SPECIFIC STYLES --- */
        #xterm-window {
            top: 10%;
            left: 10%;
            width: 600px;
            height: 400px;
        }

        .terminal-content {
            background-color: var(--term-bg);
            color: var(--term-text);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            padding: 5px;
            flex-grow: 1;
            overflow-y: auto;
            border-top: 2px solid var(--win-border-black);
            border-left: 2px solid var(--win-border-black);
            border-right: 2px solid var(--win-border-light);
            border-bottom: 2px solid var(--win-border-light);
            margin: 4px;
            cursor: text;
        }

        .command-line {
            display: flex;
        }

        .prompt {
            color: #00ff00;
            margin-right: 8px;
        }

        #cmd-input {
            background: transparent;
            border: none;
            color: var(--term-text);
            font-family: inherit;
            font-size: inherit;
            flex-grow: 1;
            outline: none;
            caret-color: var(--term-text); /* Green cursor */
        }

        /* --- TASKBAR (BOTTOM) --- */
        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 32px;
            background-color: var(--win-gray);
            border-top: 2px solid var(--win-border-light);
            display: flex;
            align-items: center;
            padding: 0 4px;
            z-index: 1000;
        }

        .start-btn {
            width: 32px;
            height: 24px;
            background-color: var(--win-gray);
            border-top: 2px solid var(--win-border-light);
            border-left: 2px solid var(--win-border-light);
            border-right: 2px solid var(--win-border-black);
            border-bottom: 2px solid var(--win-border-black);
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            margin-right: 10px;
            cursor: pointer;
        }
        
        /* The "X" logo */
        .start-btn span {
            color: red; /* X11 logo style red X */
        }

        .taskbar-item {
            padding: 2px 8px;
            margin-right: 4px;
            background-color: var(--win-gray);
            border-top: 2px solid var(--win-border-black); /* Pressed in look for active */
            border-left: 2px solid var(--win-border-black);
            border-right: 2px solid var(--win-border-light);
            border-bottom: 2px solid var(--win-border-light);
            font-size: 12px;
            font-weight: bold;
        }

        .clock {
            margin-left: auto; /* Push to right */
            padding: 4px 10px;
            border-top: 2px solid var(--win-border-black);
            border-left: 2px solid var(--win-border-black);
            border-right: 2px solid var(--win-border-light);
            border-bottom: 2px solid var(--win-border-light);
            font-size: 12px;
            background: #e0e0e0;
        }
    </style>
</head>
<body>

    <div class="icon-container">
        <div class="desktop-icon">
            <svg viewBox="0 0 24 24"><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>
            <span>Trash</span>
        </div>
        <div class="desktop-icon" onclick="resetTerminal()">
            <svg viewBox="0 0 24 24"><path d="M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5M12,4.15L6.04,7.5L12,10.85L17.96,7.5L12,4.15M5,15.91L11,19.29V12.58L5,9.21V15.91M19,15.91V9.21L13,12.58V19.29L19,15.91Z" /></svg>
            <span>Network</span>
        </div>
    </div>

    <div id="xterm-window" class="window">
        <div class="title-bar" id="xterm-header">
            <div class="win-btn">-</div>
            <div class="title-bar-text">xterm</div>
            <div class="win-btn">x</div>
        </div>
        <div class="terminal-content" id="terminal-body" onclick="document.getElementById('cmd-input').focus()">
            <div id="output-area">
                <div>Welcome to ESBHANDARI.SYS (Linux 2.0.36)</div>
                <div>Type 'help' for a list of commands.</div>
                <br>
            </div>
            <div class="command-line">
                <span class="prompt">guest@darkstar:~$</span>
                <input type="text" id="cmd-input" autocomplete="off" spellcheck="false">
            </div>
        </div>
    </div>

    <div class="taskbar">
        <div class="start-btn"><span>X</span></div>
        <div class="taskbar-item">xterm</div>
        <div class="taskbar-item">Network Tools</div>
        <div class="taskbar-item">System Tools</div>
        <div class="clock" id="sys-clock">00:00:00</div>
    </div>

    <script>
        /* --- 1. CLOCK SYSTEM --- */
        function updateClock() {
            const now = new Date();
            // Format to Unix style: Tue Apr 24 15:25:45 1994
            const timeString = now.toLocaleTimeString('en-US', { hour12: false });
            // Simplified for taskbar space
            document.getElementById('sys-clock').innerText = timeString;
        }
        setInterval(updateClock, 1000);
        updateClock();

        /* --- 2. DRAGGABLE WINDOW LOGIC --- */
        const windowEl = document.getElementById("xterm-window");
        const headerEl = document.getElementById("xterm-header");
        
        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;

        headerEl.addEventListener("mousedown", (e) => {
            isDragging = true;
            offsetX = e.clientX - windowEl.offsetLeft;
            offsetY = e.clientY - windowEl.offsetTop;
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                windowEl.style.left = (e.clientX - offsetX) + "px";
                windowEl.style.top = (e.clientY - offsetY) + "px";
            }
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
        });

        /* --- 3. TERMINAL EMULATOR LOGIC --- */
        const inputEl = document.getElementById("cmd-input");
        const outputEl = document.getElementById("output-area");
        const terminalBody = document.getElementById("terminal-body");

        // The "File System" for the simulation
        const fileSystem = {
            "about.txt": "I am a cybersecurity enthusiast and system builder.",
            "projects.txt": "1. ESBHANDARI.SYS\n2. Network Sniffer\n3. Portfolio Deck",
            "socials.txt": "GitHub: github.com/esbhandari\nLinkedIn: linkedin.com/in/esbhandari"
        };

        inputEl.addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                const commandLine = inputEl.value.trim();
                
                // 1. Echo the command to the screen
                addToOutput("guest@darkstar:~$ " + commandLine);
                
                // 2. Process Command
                processCommand(commandLine);
                
                // 3. Clear input and scroll
                inputEl.value = "";
                terminalBody.scrollTop = terminalBody.scrollHeight;
            }
        });

        function addToOutput(text, isHTML = false) {
            const div = document.createElement("div");
            if (isHTML) div.innerHTML = text;
            else div.innerText = text;
            outputEl.appendChild(div);
        }

        function processCommand(cmd) {
            const parts = cmd.split(" ");
            const primary = parts[0].toLowerCase();
            const arg = parts[1];

            switch(primary) {
                case "":
                    break;
                case "help":
                    addToOutput("Available commands:\n  ls       - List directory contents\n  cat [file] - Display file content\n  whoami   - Print effective user name\n  date     - Print system date\n  clear    - Clear the terminal screen\n  reboot   - Reload the system");
                    break;
                case "ls":
                    addToOutput("about.txt  projects.txt  socials.txt");
                    break;
                case "cat":
                    if (!arg) {
                        addToOutput("cat: missing file operand");
                    } else if (fileSystem[arg]) {
                        addToOutput(fileSystem[arg]);
                    } else {
                        addToOutput(`cat: ${arg}: No such file or directory`);
                    }
                    break;
                case "whoami":
                    addToOutput("guest");
                    break;
                case "date":
                    addToOutput(new Date().toString());
                    break;
                case "clear":
                    outputEl.innerHTML = "";
                    break;
                case "reboot":
                    location.reload();
                    break;
                default:
                    addToOutput(`bash: ${primary}: command not found`);
            }
        }
        
        // Auto-focus input on load
        window.onload = () => inputEl.focus();

        function resetTerminal() {
            outputEl.innerHTML = "<div>Connection reset by peer...</div><br>";
            setTimeout(() => {
                outputEl.innerHTML += "<div>Reconnecting...</div><br>";
            }, 500);
        }
    </script>
</body>
</html>
